<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
        <meta http-equiv="Pragma" content="no-cache" />
        <meta http-equiv="Expires" content="0" />
        <title>Sales Commission Calculator</title>
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="css/style.css">

    </head>
    <body class="project1">
        <header>
            <div class="logo" role="img" aria-label="Blurred IDE screenshot"></div>
            <h1>Sales Commission Calculator</h1>
        </header>

        <main class="container">
            <div class="content">

                <form id="salesForm">
                    <label for="item1">Item 1:</label>
                    <input type="number" id="item1" min="0" step="1"><br>
                    <label for="item2">Item 2:</label>
                    <input type="number" id="item2" min="0" step="1"><br>
                    <label for="item3">Item 3:</label>
                    <input type="number" id="item3" min="0" step="1"><br>
                    <label for="item4">Item 4:</label>
                    <input type="number" id="item4" min="0" step="1"><br><br>

                    <button type="button" id="submitBtn">Submit</button>
                    <button type="reset" id="clearBtn">Clear Form</button>
                </form>

                <table>
                    <thead>
                        <tr><th>Item#</th><th>Price</th><th>Qty Sold</th><th>Total $</th></tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td><td>$20.99</td>
                            <td><input type="text" id="qty1" readonly></td>
                            <td><input type="text" id="total1" readonly></td>
                        </tr>
                        <tr>
                            <td>2</td><td>$12.75</td>
                            <td><input type="text" id="qty2" readonly></td>
                            <td><input type="text" id="total2" readonly></td>
                        </tr>
                        <tr>
                            <td>3</td><td>$9.95</td>
                            <td><input type="text" id="qty3" readonly></td>
                            <td><input type="text" id="total3" readonly></td>
                        </tr>
                        <tr>
                            <td>4</td><td>$35.89</td>
                            <td><input type="text" id="qty4" readonly></td>
                            <td><input type="text" id="total4" readonly></td>
                        </tr>
                        <tr>
                            <td colspan="3">Total Amount Sold</td>
                            <td><input type="text" id="totalSold" readonly></td>
                        </tr>
                        <tr>
                            <td colspan="3">Total Weekly Earnings</td>
                            <td><input type="text" id="weeklyEarnings" readonly></td>
                        </tr>
                    </tbody>
                </table>

                <div id="error" class="error"></div>

                <a href="project2.html" class="button back-to-home">Back</a>
            </div>

        </main>

        <footer>
            <p>Made by: <span>Maciej</span> | <a href="mailto:dziewulskim1@my.smccd.edu">dziewulskim1@my.smccd.edu</a></p>
        </footer>



        <script>
            const prices = [20.99, 12.75, 9.95, 35.89];
            const form = document.getElementById("salesForm");
            const errorBox = document.getElementById("error");
            const submitBtn = document.getElementById("submitBtn");

            function validateInput(val) {
                return Number.isInteger(val) && val >= 0;
            }

            submitBtn.addEventListener("click", () => {
                errorBox.textContent = ""; // clear old errors

                const inputs = [
                    Number(document.getElementById("item1").value),
                    Number(document.getElementById("item2").value),
                    Number(document.getElementById("item3").value),
                    Number(document.getElementById("item4").value)
                ];

                // check validity
                for (let q of inputs) {
                    if (!validateInput(q)) {
                        errorBox.textContent = "Error: All inputs must be whole numbers â‰¥ 0.";
                        return;
                    }
                }

                // calculate totals
                let totals = inputs.map((q, i) => q * prices[i]);
                let totalSold = totals.reduce((a, b) => a + b, 0);
                let earnings = 250 + totalSold * 0.09;

                // display qty + totals
                inputs.forEach((q, i) => {
                    document.getElementById("qty" + (i+1)).value = q;
                    document.getElementById("total" + (i+1)).value = totals[i].toFixed(2);
                });

                document.getElementById("totalSold").value = totalSold.toFixed(2);
                document.getElementById("weeklyEarnings").value = earnings.toFixed(2);
            });

            // reset handler to clear output
            form.addEventListener("reset", () => {
                errorBox.textContent = "";
                ["qty1","qty2","qty3","qty4","total1","total2","total3","total4","totalSold","weeklyEarnings"]
                    .forEach(id => document.getElementById(id).value = "");
            });
        </script>
    </body>
</html>